:set -package transformers -hide-package hashmap
:set -fno-warn-overlapping-patterns -fwarn-unused-binds -fwarn-unused-imports
:load Main

:def test const $ return ":main test"

:def docs_ const $ return $ unlines [":!cabal configure",":!cabal haddock"]
:def docs const $ return $ unlines [":docs_",":!start dist\\doc\\html\\shake\\Development-Shake.html"]

:def hlint_ const $ return ":!hlint . --report"
:def hlint const $ return $ unlines [":hlint_",":!start report.html"]

:{
:def prof \x -> return $ unlines
        [":!" ++
         "(if not exist output mkdir output) && " ++
         "(if not exist output\\obj mkdir output\\obj) && " ++
         "ghc -rtsopts -threaded -prof -auto-all -caf-all -package transformers --make Main.hs -w -odir output/obj -hidir output/obj -o output/obj/shake.exe"
        ,":!output\\obj\\shake " ++ x ++ " +RTS -p"
        ]
:}
